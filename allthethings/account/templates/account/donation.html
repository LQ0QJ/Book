{% extends "layouts/index.html" %}

{% block title %}{{ gettext('page.donation.title') }}{% endblock %}

{% block body %}
  {% from 'macros/copy_button.html' import copy_button %}

  <div class="mb-4 p-6 overflow-hidden bg-[#0000000d] break-words rounded">
    <div class="font-bold">{{ gettext('page.donation.title') }}</div>
    <div>{{ gettext('page.donation.header.id', id=('+' + donation_dict.receipt_id)) }}</div>
    <div>{{ gettext('page.donation.header.date', date=(donation_dict.created | dateformat(format='long'))) }}</div>
    <div>
      {% if donation_dict.json.discounts > 0 %}
        {{ gettext('page.donation.header.total_including_discount', span_details=('class="text-sm text-gray-500"' | safe),  total=donation_dict.formatted_native_currency.cost_cents_native_currency_str_donation_page_formal, monthly_amount_usd=donation_dict.monthly_amount_usd, duration=donation_dict.json.duration, discounts=donation_dict.json.discounts) }}
      {% else %}
        {{ gettext('page.donation.header.total_without_discount', span_details=('class="text-sm text-gray-500"' | safe),  total=donation_dict.formatted_native_currency.cost_cents_native_currency_str_donation_page_formal, monthly_amount_usd=donation_dict.monthly_amount_usd, duration=donation_dict.json.duration) }}
      {% endif %}
    </div>
    <div>{{ gettext('page.donation.header.status', label=order_processing_status_labels[donation_dict.processing_status], span_label=('class="italic"' | safe)) }}</div>

    {% if donation_dict.processing_status in [0, 4] %}
      <div class="mt-2">
        <form onsubmit='window.submitForm(event, "/dyn/account/cancel_donation/" + {{ donation_dict.donation_id | tojson }})'>
          <fieldset>
            <button class="button bg-gray-500 hover:bg-gray-600 aria-selected:bg-[#09008e] px-2 py-1 rounded-md text-white" onclick="document.querySelector('.js-donation-cancel').classList.remove('hidden'); this.classList.add('hidden'); event.preventDefault()">{{ gettext('page.donation.header.cancel.button') }}</button>
            <span class="js-donation-cancel hidden">{{ gettext('page.donation.header.cancel.confirm.msg') }} <button type="submit" class="button bg-gray-500 hover:bg-gray-600 aria-selected:bg-[#09008e] px-2 py-1 rounded-md text-white">{{ gettext('page.donation.header.cancel.confirm.button') }}</button></span>
          </fieldset>
          <div class="hidden js-success">{{ gettext('page.donation.header.cancel.success') }} <a href="/donate?tier={{ donation_dict.json.tier }}&method={{ donation_dict.json.method }}&duration={{ donation_dict.json.duration }}">{{ gettext('page.donation.header.cancel.new_donation') }}</a></div>
          <div class="hidden js-failure">{{ gettext('page.donation.header.cancel.failure') }}</div>
        </form>
      </div>
    {% else %}
      <div class="mt-2"><a href="/donate?tier={{ donation_dict.json.tier }}&method={{ donation_dict.json.method }}&duration={{ donation_dict.json.duration }}" class="custom-a inline-block bg-gray-500 hover:bg-gray-600 aria-selected:bg-[#09008e] px-2 py-1 rounded-md text-white">{{ gettext('page.donation.header.reorder') }}</a></div>
    {% endif %}
  </div>

  {% if donation_dict.processing_status == 4 %}
    <div class='js-donation-instructions-hidden'>
      <p class="mb-4">
        {{ gettext('page.donation.old_instructions.intro_paid') }}
      </p>

      <a href="#" onclick="document.querySelector('.js-donation-instructions').classList.remove('hidden'); document.querySelector('.js-donation-instructions-hidden').classList.add('hidden')">{{ gettext('page.donation.old_instructions.show_button') }}</a>
    </div>
  {% elif donation_dict.processing_status != 0 %}
    <div class='js-donation-instructions-hidden'>
      <p class="mb-4">
        {{ gettext('page.donation.old_instructions.intro_outdated') }}
      </p>

      <a href="#" onclick="document.querySelector('.js-donation-instructions').classList.remove('hidden'); document.querySelector('.js-donation-instructions-hidden').classList.add('hidden')">{{ gettext('page.donation.old_instructions.show_button') }}</a>
    </div>
  {% endif %}

  <div class="js-donation-instructions {% if donation_dict.processing_status != 0 %}hidden{% endif %}">
    {% if donation_dict.json.method in ['crypto', 'paypal'] %}
      <p class="mb-4">
        {{ gettext('page.donate.submit.crypto_note') }}
      </p>
    {% endif %}

    {% if donation_dict.json.method == 'crypto' %}
      <h2 class="mt-4 mb-4 text-xl font-bold">{{ gettext('page.donation.payment.crypto.top_header') }}</h2>

      <p class="mb-4 font-bold">{{ gettext('page.donation.payment.crypto.header1', span_circle=('class="inline-block font-light rounded-full text-white bg-[#0095ff] w-[1.5em] h-[1.5em] text-center mr-[6px]"' | safe)) }}</p>

      <p class="">
        {{ gettext('page.donation.payment.crypto.text1', total=donation_dict.formatted_native_currency.cost_cents_native_currency_str_donation_page_instructions) }}
      </p>

      <ul class="list-inside mb-4 break-all">
        <li>- Bitcoin BTC: 15ruLg4LeREntByp7Xyzhf5hu2qGn8ta2o{{ copy_button('15ruLg4LeREntByp7Xyzhf5hu2qGn8ta2o') }}</li>
        <li>- Ethereum ETH: 0x4a47880518eD21937e7d44251bd87054c1be022E{{ copy_button('0x4a47880518eD21937e7d44251bd87054c1be022E') }}</li>
        <li>- Monero XMR: 445v3zW24nBbdJDAUeRG4aWmGBwqL3ctHE9DuV42d2K7KbaWeUjn13N3f9MNnfSKpFUCkiQ9RoJ1U66CG7HPhBSDQdSdi7t{{ copy_button('445v3zW24nBbdJDAUeRG4aWmGBwqL3ctHE9DuV42d2K7KbaWeUjn13N3f9MNnfSKpFUCkiQ9RoJ1U66CG7HPhBSDQdSdi7t') }}</li>
        <li>- Solana SOL: HDMUSnfFYiKNc9r2ktJ1rsmQhS8kJitKjRZtVGMVy1DP{{ copy_button('HDMUSnfFYiKNc9r2ktJ1rsmQhS8kJitKjRZtVGMVy1DP') }}</li>
      </ul>
    {% elif donation_dict.json.method == 'binance' %}
      <p class="mb-4 font-bold"><span class="inline-block font-light rounded-full text-white bg-[#0095ff] w-[1.5em] h-[1.5em] text-center mr-[6px]">1</span>Buy Bitcoin on Binance</p>

      <p class="mb-4">
        Create an account on <a href="https://www.binance.com/en" rel="noopener noreferrer nofollow" target="_blank">Binance</a> and buy Bitcoin (BTC). Use this <a href="https://www.binance.com/en/how-to-buy/bitcoin" rel="noopener noreferrer nofollow" target="_blank">extensive guide</a> if you get stuck.
      </p>

      <p class="mb-4 font-bold"><span class="inline-block font-light rounded-full text-white bg-[#0095ff] w-[1.5em] h-[1.5em] text-center mr-[6px]">2</span>Transfer the Bitcoin to our address</p>

      <p class="mb-4">
        Go to Withdraw -> BTC.
      </p>

      <p class="mb-4">
        Enter our Bitcoin (BTC) address as the recipient, and follow the instructions to send your donation:
      </p>

      <p class="mb-4 font-mono font-bold text-sm">
        15ruLg4LeREntByp7Xyzhf5hu2qGn8ta2o{{ copy_button('15ruLg4LeREntByp7Xyzhf5hu2qGn8ta2o') }}
      </p>
    {% elif donation_dict.json.method == 'paypal' %}
      <p class="mb-4 mt-6 font-bold">{{ gettext('page.donate.submit.header1', span_circle=('class="inline-block font-light rounded-full text-white bg-[#0095ff] w-[1.5em] h-[1.5em] text-center mr-[6px]"' | safe)) }}</p>

      <p class="mb-4">
        {{ gettext('page.donate.one_time_payment.paypal.text2') }}
      </p>

      <p class="mb-4">
        {{ gettext('page.donation.payment.paypal.text3', total=donation_dict.formatted_native_currency.cost_cents_native_currency_str_donation_page_instructions) }}
      </p>

      <p class="mb-4 mt-8 font-bold">{{ gettext('page.donate.submit.header2', span_circle=('class="inline-block font-light rounded-full text-white bg-[#0095ff] w-[1.5em] h-[1.5em] text-center mr-[6px]"' | safe)) }}</p>

      <p class="mb-4">
        {{ gettext('page.donate.one_time_payment.paypal.text4', transfer_icon=('<span class="icon-[cil--transfer] align-middle"></span>' | safe)) }}
      </p>

      <p class="mb-4">
        {{ gettext('page.donation.payment.paypal.text5', total=donation_dict.formatted_native_currency.cost_cents_native_currency_str_donation_page_instructions) }}
      </p>

      <p class="mb-4 font-mono font-bold text-sm">
        15ruLg4LeREntByp7Xyzhf5hu2qGn8ta2o{{ copy_button('15ruLg4LeREntByp7Xyzhf5hu2qGn8ta2o') }}
      </p>
    {% elif donation_dict.json.method == 'paypalreg' %}
      <h2 class="mt-4 mb-4 text-xl font-bold">PayPal (regular) instructions</h2>

      <p class="mb-4 font-bold"><span class="inline-block font-light rounded-full text-white bg-[#0095ff] w-[1.5em] h-[1.5em] text-center mr-[6px]">1</span>Donate on PayPal</p>

      <p class="mb-4">
        Donate {{ donation_dict.formatted_native_currency.cost_cents_native_currency_str_donation_page_instructions }} on PayPal to the following email address:
      </p>

      <p class="mb-4 font-mono font-bold text-sm">
        AnnaReceipts@proton.me{{ copy_button('AnnaReceipts@proton.me') }}
      </p>
    {% elif donation_dict.json.method == 'bmc' %}
      <!--
        <h2 class="mt-4 mb-4 text-xl font-bold">“Buy Me a Coffee” instructions</h2>

        <p class="mb-4 font-bold"><span class="inline-block font-light rounded-full text-white bg-[#0095ff] w-[1.5em] h-[1.5em] text-center mr-[6px]">1</span>Donate through our “Buy Me a Coffee” page</p>

        <p class="mb-4">
          Donate {{ donation_dict.formatted_native_currency.cost_cents_native_currency_str_donation_page_instructions }} on <a href="https://gotopaypay.top/Home/pay?method=paypal" class="font-bold" style="color: #0095ff" rel="noopener noreferrer nofollow" target="_blank">this page</a>.
        </p>

        <p class="mb-4">
          {{ gettext('page.donate.strange_account') }}
        </p>
      -->
    {% elif donation_dict.json.method == 'alipay' %}
      <h2 class="mt-4 mb-4 text-xl font-bold">{{ gettext('page.donation.payment.alipay.top_header') }}</h2>

      <p class="mb-4 font-bold">{{ gettext('page.donation.payment.alipay.header1', span_circle=('class="inline-block font-light rounded-full text-white bg-[#0095ff] w-[1.5em] h-[1.5em] text-center mr-[6px]"' | safe)) }}</p>

      <p class="mb-4">
        {{ gettext('page.donation.payment.alipay.text1', total=donation_dict.formatted_native_currency.cost_cents_native_currency_str_donation_page_instructions, a_account=('href="https://gotopaypay.top/Home/pay?method=alipay" class="font-bold" style="color: #0095ff" rel="noopener noreferrer nofollow" target="_blank"' | safe)) }}
      </p>

      <p class="mb-4">
        {{ gettext('page.donate.strange_account') }}
      </p>
    {% elif donation_dict.json.method == 'pix' %}
      <h2 class="mt-4 mb-4 text-xl font-bold">{{ gettext('page.donation.payment.pix.top_header') }}</h2>

      <p class="mb-4 font-bold">{{ gettext('page.donation.payment.pix.header1', span_circle=('class="inline-block font-light rounded-full text-white bg-[#0095ff] w-[1.5em] h-[1.5em] text-center mr-[6px]"' | safe)) }}</p>

      <p class="mb-4">
        {{ gettext('page.donation.payment.pix.text1', total=donation_dict.formatted_native_currency.cost_cents_native_currency_str_donation_page_instructions, a_account=('href="https://gotopaypay.top/Home/pay?method=pix" class="font-bold" style="color: #0095ff" rel="noopener noreferrer nofollow" target="_blank"' | safe)) }}
      </p>

      <p class="mb-4">
        {{ gettext('page.donate.strange_account') }}
      </p>
    {% endif %}

    {% if donation_dict.json.method == 'amazon' %}
      <p class="mb-4 font-bold">Amazon.com gift card</p>

      <p class="mb-4">
        Please use the <a href="https://www.amazon.com/gp/product/B0BRSDM1XK" rel="noopener noreferrer nofollow" target="_blank">official Amazon.com form</a> to send us a gift card of <span class="font-bold">{{ donation_dict.formatted_native_currency.cost_cents_native_currency_str_donation_page_instructions }}</span> to the email address below (which has been generated just for your account). We cannot except other methods of gift cards, <strong>only sent directly from the official form on Amazon.com</strong> (not on other Amazon domains, and no forwarded emails). We cannot return your gift card if you do not use this form.
      </p>

      <p class="mb-4">
        "To" recipient email in the form: <span class="font-mono font-bold text-sm">AnnaGifts+&#8203;{{ donation_dict.receipt_id }}@&#8203;proton.&#8203;me{{ copy_button('AnnaGifts+' + donation_dict.receipt_id + '@proton.me') }}</span>
      </p>

      <p class="mb-4">
        <strong>IMPORTANT:</strong> We only support Amazon.com, not other Amazon websites. For example, .de, .co.uk, .ca, are NOT supported.
      </p>

      <p class="mb-4">
        When you have sent your gift card, click this button, so Anna can manually review it (this might take a few days):
      </p>
    {% else %}
      <p class="mt-8 mb-4 font-bold">{{ gettext('page.donation.footer.header', span_circle=('class="inline-block font-light rounded-full text-white bg-[#0095ff] w-[1.5em] h-[1.5em] text-center mr-[6px]"' | safe), circle_number=(3 if donation_dict.json.method in ['paypal', 'binance'] else 2)) }}

      <p class="mb-4">
        {% if donation_dict.json.method == 'paypalreg' %}
          Send a receipt or screenshot to your personal verification address. Do NOT use this email address for your PayPal donation.
        {% else %}
          {{ gettext('page.donation.footer.text1') }}
        {% endif %}
      </p>

      <p class="mb-4 font-mono font-bold text-sm">
        AnnaReceipts+&#8203;{{ donation_dict.receipt_id }}@&#8203;proton.&#8203;me{{ copy_button('AnnaReceipts+' + donation_dict.receipt_id + '@proton.me') }}
      </p>

      {% if donation_dict.json.method in ['crypto', 'paypal'] %}
        <p class="mb-4">
          {{ gettext('page.donation.footer.crypto_note') }}
        </p>
      {% endif %}

      <p class="mb-4">
        {{ gettext('page.donation.footer.text2') }}
      </p>
    {% endif %}

    <form onsubmit='event.preventDefault(); {% if donation_dict.processing_status == 0 %}window.submitForm(event, "/dyn/account/mark_manual_donation_sent/" + {{ donation_dict.donation_id | tojson }}){% endif %}' class="mb-4">
      <fieldset class="mb-2">

        <input type="hidden" name="tier" value="">
        <input type="hidden" name="method" value="">
        <input type="hidden" name="duration" value="">
        <input type="hidden" name="totalCentsVerification" value="">
        <button type="submit" class="bg-[#0095ff] hover:bg-[#007ed8] px-4 py-1 rounded-md text-white mb-1">{{ gettext('page.donation.footer.button') }}</button>
        <span class="js-spinner invisible mb-[-3px] text-xl text-[#555] inline-block icon-[svg-spinners--ring-resize]"></span>
      </fieldset>
      <div class="hidden js-success">{{ gettext('page.donation.footer.success') }}</div>
      <div class="hidden js-failure">{{ gettext('page.donation.footer.failure') }}</div>
    </form>

    {% if donation_dict.json.method == 'amazon' %}
      <p class="mb-4">Example:</p>

      <p class="mb-4 bg-gray-100 rounded">
        <img class="w-[100%] max-w-[500px] p-2" src="/images/annagifts2.png">
      </p>
    {% endif %}
  </div>
{% endblock %}
