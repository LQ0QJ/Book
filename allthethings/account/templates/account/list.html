{% extends "layouts/index.html" %}

{% block title %}List{% endblock %}

{% block body %}
  {% if gettext('common.english_only') != 'Text below continues in English.' %}
    <p class="mb-4 font-bold">{{ gettext('common.english_only') }}</p>
  {% endif %}

  <div lang="en">
    <div class="mt-4 mb-1"><h2 class="inline text-2xl font-bold">{{ list_record_dict.name }}</h2>{% if account_dict.account_id == current_account_id %}<a href="#" class="ml-2" onclick="event.preventDefault(); document.querySelector('.js-list-edit-name').classList.toggle('hidden')">edit</a>{% endif %}</div>

    <form onsubmit='window.submitForm(event, "/dyn/list/name/" + {{ list_record_dict.list_id | tojson }})' class="js-list-edit-name hidden mt-2 mb-4">
      <fieldset class="mb-4">
        <input required minlength="1" maxlength="200" type="text" name="name" class="grow bg-[#00000011] px-2 py-1 mb-1 rounded w-[100%]" value="{{ list_record_dict.name }}" placeholder="{{ list_record_dict.name }}"/>
        <button type="submit" class="mr-2 bg-[#777] hover:bg-[#999] text-white font-bold px-4 py-2 rounded shadow">Save</button>
        <span class="js-spinner invisible mb-[-3px] text-xl text-[#555] inline-block icon-[svg-spinners--ring-resize]"></span>
      </fieldset>
      <div class="hidden js-success">✅ Saved. Please reload the page.</div>
      <div class="hidden js-failure">❌ Something went wrong. Please try again.</div>
    </form>

    {% from 'macros/profile_link.html' import profile_link %}
    <div class="mb-4 text-sm text-gray-500">List by {{ profile_link(account_dict, current_account_id) }}, created <span class="text-[#000000a3] text-sm" title="{{ list_record_dict.created | datetimeformat(format='long') }}">{{ list_record_dict.created_delta | timedeltaformat(add_direction=True) }}</span></div>

    <div class="mb-4">
      {% if md5_dicts | length == 0 %}
        <p>List is empty.</p>
      {% else %}
        {% from 'macros/md5_list.html' import md5_list %}
        {{ md5_list(md5_dicts) }}
      {% endif %}
    </div>

    {% if account_dict.account_id == current_account_id %}
      <p class="mb-4 text-sm text-gray-500">Add or remove from this list by finding a file and opening the “Lists” tab.</p>
    {% endif %}
  </div>
{% endblock %}
