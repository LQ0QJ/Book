{% extends "layouts/index.html" %}

{% block title %}{{ gettext('page.about.title') }}{% endblock %}

{% block body %}
  <h2 class="mt-4 mb-1 text-3xl font-bold">{{ gettext('page.about.header') }}</h2>

  <p class="">
    {{ gettext('page.home.intro.text1', span_anna=('class=""' | safe)) }}
  </p>

  <ol class="list-decimal list-inside mb-4">
    {{ gettext('page.home.intro.text2') }}
  </ol>

  <div class="bg-[#f2f2f2] p-4 pb-3 rounded-lg mb-4">
    <div class="mb-1 font-bold text-lg">{{ gettext('page.home.preservation.header') }}</div>

    <!-- <p class="mb-4">{{ gettext('page.home.preservation.text') }}</p> -->

    <p class="mb-4">{{ gettext('page.home.preservation.text1') }}</p>

    <p class="mb-4">{{ gettext('page.home.preservation.text2') }}</p>

    <div style="position: relative; height: 16px; margin-top: 16px;">
      <div style="position: absolute; left: 0; right: 0; top: 0; bottom: 0; background: white; overflow: hidden; border-radius: 16px; box-shadow: 0px 2px 4px 0px #00000038">
        <div style="position: absolute; left: 0; top: 0; bottom: 0; width: 5%; background: #0095ff"></div>
      </div>
      <div style="position: absolute; left: 5%; top: 50%; width: 16px; height: 16px; transform: translate(-50%, -50%)">
        <div style="position: absolute; left: 0; top: 0; width: 16px; height: 16px; background: #0095ff66; border-radius: 100%; animation: header-ping 1.5s cubic-bezier(0,0,.2,1) infinite"></div>
        <div style="position: absolute; left: 0; top: 0; width: 16px; height: 16px; background: white; border-radius: 100%; box-shadow: 0 0 3px #00000069;"></div>
      </div>
    </div>

    <div style="position: relative; padding-bottom: 12px">
      <div style="width: 14px; height: 14px; border-left: 1px solid gray; border-bottom: 1px solid gray; position: absolute; top: 5px; left: calc(5% - 1px)"></div>
      <div style="position: relative; left: calc(5% + 20px); width: calc(90% - 20px); top: 8px; font-size: 90%; color: #555">{{ gettext('page.home.preservation.label') }}</div>
    </div>
  </div>

  <div class="bg-[#f2f2f2] p-4 pb-3 rounded-lg mb-4">
    <div class="mb-1 font-bold text-lg">{{ gettext('page.home.access.header') }}</div>

    <p class="mb-4">{{ gettext('page.home.access.text', a_search=(' href="/search?q=Against%20intellectual%20monopoly"' | safe)) }}</a></p>

    <div class="js-home-stats-downloads-chart h-[200px] mb-2 rounded overflow-hidden"></div>

    <div class="text-center" style="font-size: 90%; color: #555">{{ gettext('page.home.access.label', hourly=('<span class="js-home-stats-downloads-hourly">…</span>' | safe), daily=('<span class="js-home-stats-downloads-daily">…</span>' | safe)) }}</div>

    <script>
      const fetchPromise = fetch("/dyn/downloads/stats/").then((response) => response.json());
      const loadedPromise = new Promise((resolve, reject) => document.addEventListener("DOMContentLoaded", () => { resolve () }));
      Promise.all([fetchPromise, loadedPromise]).then(([json]) => {
        const hourlyAverage = json.timeseries_y.reduce((a,c) => a + c, 0) / json.timeseries_y.length;
        document.querySelector(".js-home-stats-downloads-hourly").innerText = Math.round(hourlyAverage/1000).toLocaleString() + "k";
        document.querySelector(".js-home-stats-downloads-daily").innerText = Math.round(hourlyAverage*24/1000).toLocaleString() + "k";
        Plotly.newPlot(document.querySelector(".js-home-stats-downloads-chart"), [{
          type: "bar",
          x: json.timeseries_x.map((t) => new Date(t * 3600000)),
          y: json.timeseries_y,
          line: {color: '#0095ff'}
        }], {
          margin: {
            l: 40,
            r: 16,
            b: 50,
            t: 12,
            pad: 0
          }
        }, {staticPlot: true});
      });
    </script>
  </div>

  <!-- <p><strong>{{ gettext('page.home.search.header') }}</strong></p>

  <p class="mb-4">
    {{ gettext('page.home.search.intro') }}
  </p>

  <form action="/search" method="get" role="search">
    <div class="flex mb-8">
      <input type="search" name="q" placeholder="{{ gettext('common.search.placeholder') }}" value="{{search_input}}" class="grow max-w-[400] bg-black/6.7 px-2 py-1 mr-2 rounded">
      <button class="text-[#777] hover:text-[#333]" type="submit">{{ gettext('common.search.submit') }}</button>
    </div>
  </form> -->

  <!-- <p><strong>{{ gettext('page.home.random_book.header') }}</strong></p>

  <p class="mb-4">
    {{ gettext('page.home.random_book.intro') }}
  </p>

  <a href="/random_book" class="custom-a flex mb-8">
    <button class="mr-2 bg-[#777] hover:bg-[#999] text-white font-bold py-1 px-3 rounded shadow">{{ gettext('page.home.random_book.submit') }}</button>
  </a> -->


  <p class="mb-4">
    {{ gettext('page.about.text1') }}
  </p>

  <p class="mb-4">
    {{ gettext('page.about.text2') }}
  </p>

  <p class="mb-4">
    {{ gettext('page.about.text3', email=('<a class="break-all" href="mailto:AnnaArchivist@proton.me">AnnaArchivist@proton.me</a>' | safe)) }}
  </p>

  <p class="mb-4">
    {{ gettext('page.about.text4', email=('<a class="break-all" href="mailto:AnnaDMCA@proton.me">AnnaDMCA@proton.me</a>' | safe)) }}
  </p>
  
  <p><strong>{{ gettext('page.about.help.header') }}</strong></p>

  <ol class="list-inside mb-4">
    {{ gettext('page.about.help.text') }}
    <li>{{ gettext('page.about.help.text6', a_security=('href="/security"' | safe)) }}</li>
    <li>{{ gettext('page.about.help.text7') }}</li>
    <li>{{ gettext('page.about.help.text8') }}</li>
    <li>{{ gettext('page.about.help.text9', a_upload=('href="/account/upload"' | safe)) }}</li>
    <li>{{ gettext('page.about.help.text10') }}</li>
    <li>{{ gettext('page.about.help.text11') }}</li>
  </ol>

  {% if gettext('common.english_only') != 'Text below continues in English.' %}
    <p class="mb-4 font-bold">{{ gettext('common.english_only') }}</p>
  {% endif %}

  <div lang="en">
    <!-- <p><strong>Progress bar</strong></p>

    <p class="mb-4">
      The progress bar on the home page is currently not meaningful.
      We don't know how many unique editions we actually have in shadow libraries (vs how many duplicates), nor do we know <a href="http://annas-blog.org/blog-isbndb-dump-how-many-books-are-preserved-forever.html">how many books</a> there are in the world.
      And humanity’s written heritage extends beyond just books — especially nowadays.
      But we aspire to figure out those numbers, as well as expand beyond books.
      Hopefully we can fill in this progress bar with real data in the future.
    </p>

    <p class="mb-4">
      For now, the progress bar highlights our ambition and philosophy. We hope to inspire you to join us on this mission.
    </p> -->

    <p><strong>Resources</strong></p>

    <ul class="list-inside mb-4">
      <li class="list-disc"><a href="https://annas-blog.org">Anna’s Blog</a>, <a href="https://www.reddit.com/user/AnnaArchivist">Reddit</a>, <a href="https://www.reddit.com/r/Annas_Archive">Subreddit</a> — regular updates</li>
      <li class="list-disc"><a href="https://annas-software.org">Anna’s Software</a> — our open source code</li>
      <li class="list-disc"><a href="https://translate.annas-software.org">Translate on Anna’s Software</a> — our translation system</li>
      <li class="list-disc"><a href="/datasets">Datasets</a> — about the data</li>
      <li class="list-disc"><a href="https://annas-archive.org">annas-archive.org</a>, <a href="https://annas-archive.gs">.gs</a>, <a href="https://annas-archive.se">.se</a> — alternative domains</li>
      <li class="list-disc"><a href="https://en.wikipedia.org/wiki/Anna%27s_Archive">Wikipedia</a> — more about us (please help keep this page updated, or create one for your own language!)</li>
    </ul>

    <p><strong>Content complaints</strong></p>

    <p class="mb-4">
      We do not host any copyrighted materials here. We are a search engine, and as such only index metadata that is already publicly available.
      When downloading from these external sources, we would suggest to check the laws in your jurisdiction with respect to what is allowed.
      We are not responsible for content hosted by others.
    </p>

    <p class="mb-4">
      If you have complaints about what you see on here, your best bet is to contact the original website.
      We regularly pull their changes into our database.
      If you really do think you have a valid DMCA complaint we should respond to, please fill out the <a href="/copyright">DMCA / Copyright claim form</a>.
      We take your complaints seriously, and will get back to you as soon as possible.
    </p>
  </div>

  <p><strong>{{ gettext('page.home.explore.header') }}</strong></p>

  <p class="mb-4">
    {{ gettext('page.home.explore.intro') }}
  </p>

  {% for aarecord in aarecords %}
    <a href="/search?q={{aarecord.file_unified_data.title_best | urlencode}}" class="custom-a flex items-center relative left-[-10] px-[10] py-2 hover:bg-black/6.7" rel="nofollow">
      <div class="flex-none">
        <div class="relative overflow-hidden w-[72] h-[108] flex flex-col justify-center">
          <div class="absolute w-full h-[90]" style="background-color: hsl({{ (loop.index0 % 4) * (256//3) + (range(0, 256//3) | random) }}deg 43% 73%)"></div>
          <img class="relative inline-block" src="{{aarecord.file_unified_data.cover_url_best if 'zlibcdn2' not in aarecord.file_unified_data.cover_url_best}}" alt="" referrerpolicy="no-referrer" onerror="this.parentNode.removeChild(this)" loading="lazy" decoding="async"/>
        </div>
      </div>
      <div class="relative top-[-1] pl-4 grow overflow-hidden">
        <h3 class="text-xl font-bold">{{aarecord.file_unified_data.title_best}}</h3>
        <div class="text-lg italic">{{aarecord.file_unified_data.author_best}}</div>
      </div>
    </a>
  {% endfor %}
{% endblock %}
