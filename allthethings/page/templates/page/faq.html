{% extends "layouts/index.html" %}

{% block title %}{{ gettext('page.faq.title') }}{% endblock %}

{% block body %}
  <h2 class="mt-4 mb-1 text-3xl font-bold">{{ gettext('page.faq.title') }}</h2>

  <h3 class="group mt-4 mb-1 text-xl font-bold" id="what">{{ gettext('page.faq.what_is.title') }} <a href="#what" class="custom-a invisible group-hover:visible text-gray-400 hover:text-gray-500 font-normal text-sm align-[2px]">§</a></h3>

  <p class="">
    {{ gettext('page.home.intro.text1', span_anna=('class=""' | safe)) }}
  </p>

  <ol class="list-decimal list-inside mb-4">
    {{ gettext('page.home.intro.text2') }}
  </ol>

  <p class="mb-4">
    <!-- TODO:TRANSLATE -->
    All our <a href="https://annas-software.org/">code</a> and <a href="/datasets">data</a> are completely open source.
  </p>

  <div class="bg-[#f2f2f2] p-4 pb-3 rounded-lg mb-4">
    <div class="mb-1 font-bold text-lg">{{ gettext('page.home.preservation.header') }}</div>

    <p class="mb-4">{{ gettext('page.home.preservation.text1') }}</p>

    <p class="mb-4">{{ gettext('page.home.preservation.text2') }}</p>

    <div style="position: relative; height: 16px; margin-top: 16px;">
      <div style="position: absolute; left: 0; right: 0; top: 0; bottom: 0; background: white; overflow: hidden; border-radius: 16px; box-shadow: 0px 2px 4px 0px #00000038">
        <div style="position: absolute; left: 0; top: 0; bottom: 0; width: 5%; background: #0095ff"></div>
      </div>
      <div style="position: absolute; left: 5%; top: 50%; width: 16px; height: 16px; transform: translate(-50%, -50%)">
        <div style="position: absolute; left: 0; top: 0; width: 16px; height: 16px; background: #0095ff66; border-radius: 100%; animation: header-ping 1.5s cubic-bezier(0,0,.2,1) infinite"></div>
        <div style="position: absolute; left: 0; top: 0; width: 16px; height: 16px; background: white; border-radius: 100%; box-shadow: 0 0 3px #00000069;"></div>
      </div>
    </div>

    <div style="position: relative; padding-bottom: 12px">
      <div style="width: 14px; height: 14px; border-left: 1px solid gray; border-bottom: 1px solid gray; position: absolute; top: 5px; left: calc(5% - 1px)"></div>
      <div style="position: relative; left: calc(5% + 20px); width: calc(90% - 20px); top: 8px; font-size: 90%; color: #555">{{ gettext('page.home.preservation.label') }}</div>
    </div>
  </div>

  <div class="bg-[#f2f2f2] p-4 pb-3 rounded-lg mb-4">
    <div class="mb-1 font-bold text-lg">{{ gettext('page.home.access.header') }}</div>

    <p class="mb-4">{{ gettext('page.home.access.text', a_search=(' href="/search?q=Against%20intellectual%20monopoly"' | safe)) }}</a></p>

    <div class="js-home-stats-downloads-chart h-[200px] mb-2 rounded overflow-hidden"></div>

    <div class="text-center" style="font-size: 90%; color: #555">{{ gettext('page.home.access.label', hourly=('<span class="js-home-stats-downloads-hourly">…</span>' | safe), daily=('<span class="js-home-stats-downloads-daily">…</span>' | safe)) }}</div>

    <script>
      const fetchPromise = fetch("/dyn/downloads/stats/").then((response) => response.json());
      const loadedPromise = new Promise((resolve, reject) => document.addEventListener("DOMContentLoaded", () => { resolve () }));
      Promise.all([fetchPromise, loadedPromise]).then(([json]) => {
        const hourlyAverage = json.timeseries_y.reduce((a,c) => a + c, 0) / json.timeseries_y.length;
        document.querySelector(".js-home-stats-downloads-hourly").innerText = Math.round(hourlyAverage/1000).toLocaleString() + "k";
        document.querySelector(".js-home-stats-downloads-daily").innerText = Math.round(hourlyAverage*24/1000).toLocaleString() + "k";
        Plotly.newPlot(document.querySelector(".js-home-stats-downloads-chart"), [{
          type: "bar",
          x: json.timeseries_x.map((t) => new Date(t * 3600000)),
          y: json.timeseries_y,
          line: {color: '#0095ff'}
        }], {
          margin: {
            l: 40,
            r: 16,
            b: 50,
            t: 12,
            pad: 0
          }
        }, {staticPlot: true});
      });
    </script>
  </div>

  <p class="mb-4">
    {{ gettext('page.about.text2') }}
  </p>

  <p class="mb-4">
    {{ gettext('page.about.text3', email=(('<a href="/contact">' | safe + gettext('page.contact.title') + '</a>' | safe) | safe)) }}
  </p>
  
  <h3 class="group mt-4 mb-1 text-xl font-bold" id="help">{{ gettext('page.faq.help.title') }} <a href="#help" class="custom-a invisible group-hover:visible text-gray-400 hover:text-gray-500 font-normal text-sm align-[2px]">§</a></h3>

  <ol class="list-inside mb-4">
    {{ gettext('page.about.help.text') }}
    <li>{{ gettext('page.about.help.text6', a_security=('href="/faq#security"' | safe)) }}</li>
    <li>{{ gettext('page.about.help.text7') }}</li>
    <li>{{ gettext('page.about.help.text8') }}</li>
    <li>{{ gettext('page.about.help.text9', a_upload=('href="/faq#upload"' | safe)) }}</li>
    <li>{{ gettext('page.about.help.text10') }}</li>
    <li>{{ gettext('page.about.help.text11') }}</li>
    <li>12. {{ gettext('page.faq.help.mirrors', a_mirrors=(' href="/mirrors" ' | safe)) }}</li>
  </ol>

  <h3 class="group mt-4 mb-1 text-xl font-bold" id="donate">{{ gettext('page.donate.faq.title') }} <a href="#donate" class="custom-a invisible group-hover:visible text-gray-400 hover:text-gray-500 font-normal text-sm align-[2px]">§</a></h3>

  <div class="mb-4">
    {{ gettext('page.donate.faq.renew', div_question=(' class="font-bold" ' | safe)) }}
  </div>

  <div class="mb-4">
    {{ gettext('page.donate.faq.text_other_payment1', div_question=(' class="font-bold" ' | safe), email=(('<a href="/contact">' | safe + gettext('page.contact.title') + '</a>' | safe) | safe)) }}
  </div>

  <div class="mb-4">
    {{ gettext('page.donate.faq.spend', div_question=(' class="font-bold" ' | safe)) }}
  </div>

  <div class="mb-4">
    {{ gettext('page.donate.faq.text_large_donation', div_question=(' class="font-bold" ' | safe), email=(('<a href="/contact">' | safe + gettext('page.contact.title') + '</a>' | safe) | safe)) }}
  </div>

  <div class="mb-4">
    <!-- TODO:TRANSLATE -->
    <div class="font-bold">Can I make a donation without becoming a member?</div>
    Sure thing. We accept donations of any amount on this Monero (XMR) address: <span class="text-xs">8C1Tdvfhj6wHHPtvMHyAmn3jgt9vF9qSdKCYFy8U9ioB2Z16tEhjLSaB8qMSfzsnQeSrbohpYAiMgcW1acmmvCHQ4YGmZip</span>
  </div>

  <h3 class="group mt-4 mb-1 text-xl font-bold" id="upload">{{ gettext('page.faq.upload.title') }} <a href="#upload" class="custom-a invisible group-hover:visible text-gray-400 hover:text-gray-500 font-normal text-sm align-[2px]">§</a></h3>

  <p class="mb-4">
    {{ gettext('page.upload.text1', a_guide=(' href="https://wiki.mhut.org/content:how_to_upload" rel="noopener noreferrer" target="_blank"' | safe)) }}
    {{ gettext('common.libgen.email', a_mail=(' href="https://proton.me/" rel="noopener noreferrer" target="_blank"' | safe), a_manual=(' href="https://forum.mhut.org/viewtopic.php?f=6&t=29" rel="noopener noreferrer" target="_blank"' | safe)) }}
  </p>

  <p class="mb-4">
    {{ gettext('page.upload.zlib.text', a_upload=(' href="https://1lib.sk//book-add.php" rel="noopener noreferrer" target="_blank"' | safe)) }}
  </p>

  <p class="mb-4">
    {{ gettext('page.upload.large.text', a_email=(('<a href="/contact">' | safe + gettext('page.contact.title') + '</a>' | safe) | safe)) }}
  </p>

  <h3 class="group mt-4 mb-1 text-xl font-bold" id="request">{{ gettext('page.faq.request.title') }} <a href="#request" class="custom-a invisible group-hover:visible text-gray-400 hover:text-gray-500 font-normal text-sm align-[2px]">§</a></h3>

  <p class="mb-4">
    {{ gettext('page.request.cannot_accomodate') }}
    {{ gettext('page.request.forums') }}
    {{ gettext('page.request.dont_email') }}
  </p>

  <!-- TODO:TRANSLATE everything below -->
  <h3 class="group mt-4 mb-1 text-xl font-bold" id="1984">I downloaded 1984 by George Orwell, will the police come at my door? <a href="#1984" class="custom-a invisible group-hover:visible text-gray-400 hover:text-gray-500 font-normal text-sm align-[2px]">§</a></h3>

  <p class="mb-4">
    Don’t worry too much, there are many people downloading from websites linked to by us, and it’s extremely rare to get into trouble. However, to stay safe we recommend using a VPN (paid), or <a href="https://www.torproject.org/download/">Tor</a> (free).
  </p>

  <h3 class="group mt-4 mb-1 text-xl font-bold" id="mobile">Do you have a mobile app? <a href="#mobile" class="custom-a invisible group-hover:visible text-gray-400 hover:text-gray-500 font-normal text-sm align-[2px]">§</a></h3>

  <p class="mb-4">
      We don’t have an official mobile app, but you can install this website as an app.<br>
      <strong>Android:</strong> Click the three-dot menu in the top right, and select “Add to Home Screen”.<br>
      <strong>iOS:</strong> Click the “Share” button at the bottom, and select “Add to Home Screen”.
  </p>

  <h3 class="group mt-4 mb-1 text-xl font-bold" id="security">Do you have a responsible disclosure program? <a href="#security" class="custom-a invisible group-hover:visible text-gray-400 hover:text-gray-500 font-normal text-sm align-[2px]">§</a></h3>

  <p class="mb-4">
    We welcome security researchers to search for vulnerabilities in our systems. We are big proponents of responsible disclosure. Contact us <a href="/contact">here</a>.
  </p>

  <p class="mb-4">
    We are currently unable to award bug bounties, except for vulnerabilities that have the potential to compromise our anonymity, for which we offer bounties in the $10k-50k range. We’d like to offer wider scope for bug bounties in the future! Please note that social engineering attacks are out of scope.
  </p>

  <p class="mb-4">
    If you are interested in offensive security, and want to help archive the world’s knowledge and culture, be sure to contact us. There are many ways in which you can help.
  </p>

  <h3 class="group mt-4 mb-1 text-xl font-bold" id="resources">Are there more resources about Anna’s Archive? <a href="#resources" class="custom-a invisible group-hover:visible text-gray-400 hover:text-gray-500 font-normal text-sm align-[2px]">§</a></h3>

  <ul class="list-inside mb-4">
    <li class="list-disc"><a href="https://annas-blog.org">Anna’s Blog</a>, <a href="https://www.reddit.com/user/AnnaArchivist">Reddit</a>, <a href="https://www.reddit.com/r/Annas_Archive">Subreddit</a> — regular updates</li>
    <li class="list-disc"><a href="https://annas-software.org">Anna’s Software</a> — our open source code</li>
    <li class="list-disc"><a href="https://translate.annas-software.org">Translate on Anna’s Software</a> — our translation system</li>
    <li class="list-disc"><a href="/datasets">Datasets</a> — about the data</li>
    <li class="list-disc"><a href="https://annas-archive.org">annas-archive.org</a>, <a href="https://annas-archive.gs">.gs</a>, <a href="https://annas-archive.se">.se</a> — alternative domains</li>
    <li class="list-disc"><a href="https://en.wikipedia.org/wiki/Anna%27s_Archive">Wikipedia</a> — more about us (please help keep this page updated, or create one for your own language!)</li>
  </ul>

  <h3 class="group mt-4 mb-1 text-xl font-bold" id="copyright">How do I report copyright infringement? <a href="#copyright" class="custom-a invisible group-hover:visible text-gray-400 hover:text-gray-500 font-normal text-sm align-[2px]">§</a></h3>

  <p class="mb-4">
    We do not host any copyrighted materials here. We are a search engine, and as such only index metadata that is already publicly available.
    When downloading from these external sources, we would suggest to check the laws in your jurisdiction with respect to what is allowed.
    We are not responsible for content hosted by others.
  </p>

  <p class="mb-4">
    If you have complaints about what you see on here, your best bet is to contact the original website.
    We regularly pull their changes into our database.
    If you really do think you have a valid DMCA complaint we should respond to, please fill out the <a href="/copyright">DMCA / Copyright claim form</a>.
    We take your complaints seriously, and will get back to you as soon as possible.
  </p>

  <h3 class="group mt-4 mb-1 text-xl font-bold" id="favorite">What are your favorite books? <a href="#favorite" class="custom-a invisible group-hover:visible text-gray-400 hover:text-gray-500 font-normal text-sm align-[2px]">§</a></h3>

  <p class="mb-4">
    Here are some books that carry special significance to the world of shadow libraries and digital preservation.
  </p>

  {% for aarecord in aarecords %}
    <a href="/search?q={{aarecord.file_unified_data.title_best | urlencode}}" class="custom-a flex items-center relative left-[-10] px-[10] py-2 hover:bg-black/6.7" rel="nofollow">
      <div class="flex-none">
        <div class="relative overflow-hidden w-[72] h-[108] flex flex-col justify-center">
          <div class="absolute w-full h-[90]" style="background-color: hsl({{ (loop.index0 % 4) * (256//3) + (range(0, 256//3) | random) }}deg 43% 73%)"></div>
          <img class="relative inline-block" src="{{aarecord.file_unified_data.cover_url_best if 'zlibcdn2' not in aarecord.file_unified_data.cover_url_best}}" alt="" referrerpolicy="no-referrer" onerror="this.parentNode.removeChild(this)" loading="lazy" decoding="async"/>
        </div>
      </div>
      <div class="relative top-[-1] pl-4 grow overflow-hidden">
        <h3 class="group text-xl font-bold">{{aarecord.file_unified_data.title_best}}</h3>
        <div class="text-lg italic">{{aarecord.file_unified_data.author_best}}</div>
      </div>
    </a>
  {% endfor %}
{% endblock %}
