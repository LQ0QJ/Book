{% extends "layouts/index.html" %}

{% block title %}{{aarecord.additional.top_box.meta_information[0]}}{% endblock %}

{% block meta_tags %}
  <meta name="description" content="{{aarecord.additional.top_box.meta_information[1:4] | join('\n\n')}}" />
{% endblock %}

{% block main %}
  <div class="flex flex-row h-full">
    <div class="p-4 overflow-hidden bg-black/5 break-words w-[40%] max-w-[300px] overflow-y-auto">
      <div class="mb-4 flex justify-between items-center">
        <a href="/" class="custom-a text-[#000] hover:text-[#444]"><h1 class="text-md sm:text-lg leading-none font-[900]">{{ gettext('layout.index.header.title') }}</h1></a>
        <div class="text-sm">üß¨&nbsp;{{ gettext('page.scidb.header') }}</div>
      </div>

      <div class="mb-4">
        <div class="text-sm">{{ gettext('page.scidb.doi', doi=doi_input) }} <a class="custom-a text-[10px] align-[1px] opacity-80 hover:opacity-100" href='/search?q="doi:{{ doi_input | urlencode }}"'>üîç</a></div>
      </div>

      <div class="mb-4 text-sm">
        <div class="text-xs text-gray-500">{{aarecord.additional.top_box.top_row}}</div>
        <div class="font-bold">{{aarecord.additional.top_box.title}} {% if aarecord.additional.top_box.title %}<a class="custom-a text-[10px] align-[1px] opacity-80 hover:opacity-100" href="/search?q={{ aarecord.additional.top_box.title | urlencode }}">üîç</a>{% endif %}</div>
        <div class="">{{aarecord.additional.top_box.publisher_and_edition}}</div>
        <div class="italic">{{aarecord.additional.top_box.author}} {% if aarecord.additional.top_box.author %}<a class="custom-a text-[10px] align-[1px] opacity-80 hover:opacity-100" href="/search?q={{ aarecord.additional.top_box.author | urlencode }}">üîç</a>{% endif %}</div>
      </div>

      <ul class="mb-4">
        <li>- <a href="{{ aarecord.additional.path }}">{{ gettext('page.scidb.aa_record') }}</a></li>
        {% if download_url %}<li>- <a href="{{ download_url }}">{{ gettext('page.scidb.download') }}</a></li>{% endif %}
        {% if scihub_link %}<li>- <a href="{{ scihub_link }}" rel="noopener noreferrer nofollow" target="_blank">{{ gettext('page.scidb.scihub') }}</a></li>{% endif %}
        <li>- <a href="https://doi.org/{{ doi_input }}" rel="noopener noreferrer nofollow" target="_blank">doi.org</a></li>
      </ul>

      <div class="text-xs text-gray-500">{{ gettext('page.scidb.refresh', a_refresh=(' href="javascript:window.location.reload()" ' | safe)) }}</div>
    </div>
    {% if pdf_url %}
      <div id="pdfembed" class="w-full"></div>
      <script>
        (function() {
          document.addEventListener("DOMContentLoaded", function() {
            window.PDFObject.embed({{ pdf_url | tojson }}, "#pdfembed", {fallbackLink:true});
          });
        })();
      </script>
    {% elif scihub_link %}
      <iframe class="w-full" src="{{ scihub_link }}">
    {% endif %}
  </div>
{% endblock %}
