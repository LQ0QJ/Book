{% extends "layouts/index.html" %}

{% block body %}
  {% if gettext('common.english_only') | trim %}
    <p class="mb-4 font-bold">{{ gettext('common.english_only') }}</p>
  {% endif %}

  <div lang="en">
    <p class="">
      <!-- {{ gettext('page.home.intro') }} -->
      <span class="italic font-bold">Anna’s Archive</span> is a non-profit open-source open-data project with two goals:<br>
    </p>

    <ol class="list-decimal list-inside mb-4">
      <li><strong>Preservation:</strong> Backing up all knowledge and culture of humanity.</li>
      <li><strong>Access:</strong> Making this knowledge and culture available to anyone in the world.</li>
    </ol>

    <div class="bg-[#f2f2f2] p-4 rounded-lg mb-4">
      <div class="mb-1 font-bold text-lg">Preservation</div>

      <p class="mb-4">We preserve books, papers, comics, magazines, and more, by bringing these materials from various <a href="https://en.wikipedia.org/wiki/Shadow_library">shadow libraries</a> together in one place. All this data is preserved forever by making it easy to duplicate it in bulk, resulting in many copies exist around the world. This wide distribution, combined with our open-source model, also makes our website incredibly resilient to government takedowns.</p>

      <div style="position: relative; height: 16px; margin-top: 16px;">
        <div style="position: absolute; left: 0; right: 0; top: 0; bottom: 0; background: white; overflow: hidden; border-radius: 16px; box-shadow: 0px 2px 4px 0px #00000038">
          <div style="position: absolute; left: 0; top: 0; bottom: 0; width: 5%; background: #0095ff"></div>
        </div>
        <div style="position: absolute; left: 5%; top: 50%; width: 16px; height: 16px; transform: translate(-50%, -50%)">
          <div style="position: absolute; left: 0; top: 0; width: 16px; height: 16px; background: #0095ff66; border-radius: 100%; animation: header-ping 1.5s cubic-bezier(0,0,.2,1) infinite"></div>
          <div style="position: absolute; left: 0; top: 0; width: 16px; height: 16px; background: white; border-radius: 100%; box-shadow: 0 0 3px #00000069;"></div>
        </div>
      </div>

      <div style="position: relative; padding-bottom: 12px">
        <div style="width: 14px; height: 14px; border-left: 1px solid gray; border-bottom: 1px solid gray; position: absolute; top: 5px; left: calc(5% - 1px)"></div>
        <div style="position: relative; left: calc(5% + 20px); width: calc(90% - 20px); top: 8px; font-size: 90%; color: #555">We estimate that we have preserved about <a href="https://annas-blog.org/blog-isbndb-dump-how-many-books-are-preserved-forever.html">5% of the world’s books</a>.</div>
      </div>
    </div>

    <div class="bg-[#f2f2f2] p-4 rounded-lg mb-4">
      <div class="mb-1 font-bold text-lg">Access</div>

      <p class="mb-4">We work with various partners to make our collections easily accessible to anyone, for free. We believe that everyone has a right to the collective wisdom of humanity, and that this <a href="/search?q=Against%20intellectual%20monopoly">does not have to come</a> at the expense of authors.</p>

      <div class="js-home-stats-downloads-chart h-[200px] mb-1 rounded overflow-hidden"></div>

      <div class="text-center" style="font-size: 90%; color: #555">Hourly downloads in the last 30 days.</div>

      <script>
        fetch("/dyn/downloads/stats/").then((response) => response.json()).then((json) => {
          Plotly.newPlot(document.querySelector(".js-home-stats-downloads-chart"), [{
            type: "bar",
            x: json.timeseries_x.map((t) => new Date(t * 3600000)),
            y: json.timeseries_y,
            line: {color: '#0095ff'}
          }], {
            margin: {
              l: 40,
              r: 16,
              b: 50,
              t: 12,
              pad: 0
            }
          }, {staticPlot: true});
        });
      </script>
    </div>
  </div>

  <p><strong>{{ gettext('page.home.search.header') }}</strong></p>

  <p class="mb-4">
    {{ gettext('page.home.search.intro') }}
  </p>

  <form action="/search" method="get" role="search">
    <div class="flex mb-8">
      <input type="text" name="q" placeholder="{{ gettext('common.search.placeholder') }}" value="{{search_input}}" class="grow max-w-[400] bg-[#00000011] px-2 py-1 mr-2 rounded">
      <button class="text-[#777] hover:text-[#333]" type="submit">{{ gettext('common.search.submit') }}</button>
    </div>
  </form>

  <p><strong>{{ gettext('page.home.explore.header') }}</strong></p>

  <p class="mb-4">
    {{ gettext('page.home.explore.intro') }}
  </p>

  {% for md5_dict in md5_dicts %}
    <a href="/search?q={{md5_dict.file_unified_data.title_best | urlencode}}" class="custom-a flex items-center relative left-[-10] px-[10] py-2 hover:bg-[#00000011]" rel="nofollow">
      <div class="flex-none">
        <div class="relative overflow-hidden w-[72] h-[108] flex flex-col justify-center">
          <div class="absolute w-[100%] h-[90]" style="background-color: hsl({{ (loop.index0 % 4) * (256//3) + (range(0, 256//3) | random) }}deg 43% 73%)"></div>
          <img class="relative inline-block" src="{{md5_dict.file_unified_data.cover_url_best if 'zlibcdn2' not in md5_dict.file_unified_data.cover_url_best}}" alt="" referrerpolicy="no-referrer" onerror="this.parentNode.removeChild(this)" loading="lazy" decoding="async"/>
        </div>
      </div>
      <div class="relative top-[-1] pl-4 grow overflow-hidden">
        <h3 class="text-xl font-bold">{{md5_dict.file_unified_data.title_best}}</h3>
        <div class="text-lg italic">{{md5_dict.file_unified_data.author_best}}</div>
      </div>
    </a>
  {% endfor %}
{% endblock %}
